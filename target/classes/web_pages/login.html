<html>
    <head>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
        <!-- CSS Reset -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
        <!-- Milligram CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
        <!-- Custom CSS-->
        <link rel="stylesheet" type="text/css" rel="noopener" target="_blank" href="/web_pages/login.css">
    </head>

    <body>
        <div class="loginDiv">
            <h2> Welcome to Schat! </h2>
            <hr/>
            <div class='loginMessage' id="loginMessage"></div><br/><br/>
            <form id="loginForm">
                Username: <input type='text' id='loginUsername'/><br/>
                Password: <input type='password' id='loginPassword'/><br/>
                <input type='button' value='Login' onclick="submitLoginForm()"/>
            </form>
        </div>

        <script>
            async function submitLoginForm() {
                const username = document.getElementById('loginUsername').value;
                const password = document.getElementById('loginPassword').value;

                try {
                    const response = await fetch('/login', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded'
                        },
                        body: `username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}`
                    });
                    const text = await response.text();
                    document.getElementById('loginMessage').innerText = text;
                } catch (error) {
                    document.getElementById('loginMessage').innerText = 'Error: ' + error.message;
                }
            }
        </script>
    </body>
</html>